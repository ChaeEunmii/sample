const ALL_AGREE_ID = AGREEMENTS1.id;
const HYUNDAI_IDS = ['hyundai-1','hyundai-2','hyundai-3','hyundai-4','hyundai-5'];

const handleCheckChange = (id: string, checked: boolean) => {
  // 최상위 전체동의가 해제될 때: terms-homepage 해제 + 현대 하위 비활성화 + 체크 해제
  if (id === ALL_AGREE_ID && !checked) {
    setAgreeStates((prev) => {
      const next = { ...prev, [ALL_AGREE_ID]: false, 'terms-homepage': false };
      HYUNDAI_IDS.forEach((k) => (next[k] = false)); // ⬅️ 하위 체크도 해제
      return next;
    });
    setDisabledStates((prev) => {
      const next = { ...prev };
      HYUNDAI_IDS.forEach((k) => (next[k] = true)); // ⬅️ 하위 비활성화 복원
      return next;
    });
    return; // 여기서 종료 (아래 공통 처리 안 타게)
  }

  // terms-homepage 토글 시 현대 하위 활성/비활성
  if (id === 'terms-homepage') {
    setDisabledStates((prev) => {
      const next = { ...prev };
      HYUNDAI_IDS.forEach((k) => (next[k] = !checked)); // 체크되면 활성(false), 해제면 비활성(true)
      return next;
    });
  }

  // 공통: 체크 상태 반영
  setAgreeStates((prev) => ({ ...prev, [id]: checked }));
};